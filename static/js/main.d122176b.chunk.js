(this.webpackJsonpfpl=this.webpackJsonpfpl||[]).push([[0],{204:function(e,t,a){e.exports=a(397)},209:function(e,t,a){},210:function(e,t,a){},397:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(40),o=a.n(i),c=(a(209),a(210),a(25)),l=a(14),s=a(26),u=a(27),m=a(29),d=a(10),h=a(412),p=a(414),g=a(410),f=a(406),E=a(413),v=a(407),y=a(411),b=a(409),k=a(408),w=a(13),j=a.n(w),O="https://cors-anywhere.herokuapp.com/",_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!0,error:null,details:[],details_individual:[],winners:[],disqualify_game:[27],disqualify_id:[1958495]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"get_random_color",value:function(){function e(){var e=Math.floor(256*Math.random()).toString(16);return("0"+String(e)).substr(-2)}return"#"+e()+e()+e()}},{key:"componentDidMount",value:function(){var e=this;return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.awrap(this.fetchDetailsData());case 2:setTimeout((function(){e.findWinners(e.state.disqualify_game,e.state.disqualify_id)}),2e3),this.setState({isLoading:!1});case 4:case"end":return t.stop()}}),null,this)}},{key:"fetchInitialData",value:function(){var e,t,a;return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setState({isLoading:!0}),n.next=3,j.a.awrap(fetch(O+"https://fantasy.premierleague.com/api/leagues-classic/407866/standings/?page_new_entries=1&page_standings=1&phase=1"));case 3:return e=n.sent,n.next=6,j.a.awrap(e.json());case 6:return t=n.sent,a=t.standings.results,this.setState({details:a,error:e.error}),n.next=11,j.a.awrap(a);case 11:return n.abrupt("return",n.sent);case 12:case"end":return n.stop()}}),null,this)}},{key:"fetchDetailsData",value:function(){var e,t,a,n=this;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j.a.awrap(this.fetchInitialData());case 2:return e=r.sent,t=[],a=e.map((function(e){n.setState({isLoading:!0}),fetch(O+"https://fantasy.premierleague.com/api/entry/".concat(e.entry,"/history/")).then((function(e){if(e.ok)return e.json();throw Error("Error fetching data!")})).then((function(a){var r={id:e.entry,name:e.player_name,color:n.get_random_color(),data:a.current};t.push(r)})).catch((function(e){return n.setState({error:e})}))})),r.next=7,j.a.awrap(Promise.all(a));case 7:this.setState({details_individual:t});case 8:case"end":return r.stop()}}),null,this)}},{key:"findWinners",value:function(e,t){var a=this.state.details_individual,n=a[0].data.length,r=[],i=[],o=Array.from(Array(n).keys()),c=[];o.map((function(n){a.map((function(a){a.data.map((function(i){if(i.event===n+1){for(var o=[],c=[],l=[],s=[],u=0;u<e.length;u++)i.event===e[u]&&a.id===t[u]||(o=i.points-i.event_transfers_cost,c=a.id,l=a.name,s=i.event);r.push({id:c,name:l,points:o,gameWeek:s})}}))}));var o=Math.max.apply(Math,r.map((function(e){return e.points})));r.lastIndexOf(o)==r.indexOf(o),0!==o&&(i=r.filter((function(e){return e.points===o}))),c.push(i),r=[],[],i=[]})),this.setState({winners:c})}},{key:"findMaximum",value:function(e){var t=Math.max.apply(Array,e);return e.filter((function(e){return e===t}))}},{key:"render",value:function(){return this.props.children(this.state)}}]),t}(n.Component),x=Object(d.a)((function(e){return{head:{backgroundColor:e.palette.success.dark,color:e.palette.common.white},body:{fontSize:14}}}))(f.a),N=Object(d.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(v.a);function S(e){return r.a.createElement("svg",{height:"20",width:"20"},r.a.createElement("circle",{cx:"10",cy:"15",r:"5",fill:e.color}))}var C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=0;return r.a.createElement(_,null,(function(n){var i=n.error,o=n.isLoading,c=n.details;return i?r.a.createElement("p",{style:{color:"red"}},i.message):o?r.a.createElement(k.a,{className:t.loading}):(a=e.props.data[0].data.length,r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{variant:"h5",gutterBottom:!0,color:"primary",align:"center"},"Kokkola Cup"),r.a.createElement(g.a,{component:y.a,className:t.container},r.a.createElement(h.a,{size:"small","aria-label":"simple table"},r.a.createElement(E.a,null,r.a.createElement(v.a,null,r.a.createElement(x,null,"Rank"),r.a.createElement(x,null,"Manager"),r.a.createElement(x,{align:"right"},"GameWeek"),r.a.createElement(x,{align:"right"},"Average"),r.a.createElement(x,{align:"right"},"Total Points"))),r.a.createElement(p.a,null,c.map((function(e){return r.a.createElement(N,{key:e.id},r.a.createElement(x,null,e.last_rank<e.rank?r.a.createElement(S,{color:"red"}):e.last_rank===e.rank?r.a.createElement(S,{color:"grey"}):e.last_rank>e.rank?r.a.createElement(S,{color:"green"}):null,e.rank),r.a.createElement(x,{component:"th",scope:"row"},e.player_name),r.a.createElement(x,{align:"right"},e.event_total),r.a.createElement(x,{align:"right"},parseInt(e.total/a)),r.a.createElement(x,{align:"right"},e.total))})))))))}))}}]),t}(n.Component),M=Object(d.a)((function(e){return{root:{margin:e.spacing(1),width:"fit-content"},loading:{margin:"auto",width:"10%",padding:e.spacing(2)},container:{maxHeight:350}}}))(C),D=a(31),W=Object(d.a)((function(e){return{head:{backgroundColor:e.palette.secondary.light,color:e.palette.common.white},body:{fontSize:14}}}))(f.a),L=Object(d.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(v.a),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={show:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.setState({show:!0})}),3e3)}},{key:"render",value:function(){var e=this.props.classes,t=this.state.show;return r.a.createElement("div",null,r.a.createElement(_,null,(function(a){var n=a.error,i=a.isLoading,o=a.winners;return n?r.a.createElement("p",{style:{color:"red"}},n.message):i?r.a.createElement(k.a,{className:e.loading}):t?r.a.createElement("div",{className:e.root},r.a.createElement(b.a,{variant:"h5",gutterBottom:!0,color:"primary",align:"center"},"Winners"),r.a.createElement(g.a,{component:y.a,className:e.container},r.a.createElement(h.a,{stickyHeader:!0,size:"small","aria-label":"simple table"},r.a.createElement(E.a,{className:e.head},r.a.createElement(v.a,null,r.a.createElement(W,null,"Manager"),r.a.createElement(W,{align:"right"},"GameWeek"),r.a.createElement(W,{align:"right"},"Points"))),r.a.createElement(p.a,null,o.map((function(e){return e.map((function(e){return r.a.createElement(L,{key:e.index},r.a.createElement(W,{component:"th",scope:"row"},e.name),r.a.createElement(W,{component:"th",scope:"row",align:"right"},e.gameWeek),r.a.createElement(W,{component:"th",scope:"row",align:"right"},e.points))}))})))))):r.a.createElement("div",{className:e.loading},r.a.createElement(k.a,null))})))}}]),t}(n.Component),B=Object(d.a)((function(e){return{root:{margin:e.spacing(1),width:"100%"},container:{maxHeight:345},loading:{margin:"auto",width:"10%",padding:e.spacing(2)}}}))(A),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={show:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.setState({show:!0})}),1e3)}},{key:"render",value:function(){var e=this.props.classes,t=this.state.show;return r.a.createElement(_,null,(function(a){var n=a.error,i=a.isLoading,o=a.details_individual;return n?r.a.createElement("p",{style:{color:"red"}},n.message):i?r.a.createElement(k.a,{className:e.loading}):t?r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.table_wrapper},r.a.createElement(M,{data:o}),r.a.createElement(B,null)),r.a.createElement(b.a,{variant:"h5",gutterBottom:!0,color:"primary",align:"center"},"Chart"),r.a.createElement(D.d,{width:"95%",height:400},r.a.createElement(D.c,null,r.a.createElement(D.f,{dataKey:"event",tick:!1,allowDuplicatedCategory:!1}),r.a.createElement(D.g,{dataKey:"points"}),r.a.createElement(D.e,null),r.a.createElement(D.a,null),o.map((function(e){return r.a.createElement(D.b,{type:"monotone",dataKey:"points",data:e.data,name:e.name,key:e.id,stroke:e.color})}))))):r.a.createElement("div",{className:e.loading},r.a.createElement(k.a,null))}))}}]),t}(n.Component),q=Object(d.a)((function(e){return{root:{margin:e.spacing(1),width:"100%",height:"100%"},loading:{margin:"auto",width:"10%",padding:e.spacing(2)},table_wrapper:{display:"flex",justifyContent:"flex-start"}}}))(I);var z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[204,1,2]]]);
//# sourceMappingURL=main.d122176b.chunk.js.map